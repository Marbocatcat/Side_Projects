var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=512,canvas.height=480,document.body.appendChild(canvas);var bgReady=!1,bgImage=new Image;bgImage.onload=function(){bgReady=!0},bgImage.src="../images/background.png";var heroReady=!1,heroImage=new Image;heroImage.onload=function(){heroReady=!0},heroImage.src="../images/hero.png";var monsterReady=!1,monsterImage=new Image;monsterReady.onload=function(){monsterReady=!0},monsterImage.src="../images/monster.png";var hero={speed:256,x:0,y:0},monster={x:0,y:0},monstersCaught=0,keysDown={};addEventListener("keydown",function(e){keysDown[e.keyCode]=!0},!1),addEventListener("keyup",function(e){delete keysDown[e.keyCode]},!1);var reset=function(){hero.x=canvas.width/2,hero.y=canvas.width/2,monster.x=32+(Math.random()*canvas.width-64),monster.y=32+(Math.random()*canvas.width-64)},update=function(e){38 in keysDown&&(hero.y-=hero.speed*e),40 in keysDown&&(hero.y+=hero.speed*e),37 in keysDown&&(hero.x-=hero.speed*e),39 in keysDown&&(hero.x+=hero.speed*e),hero.x<=monster.x+32&&monster.x<=hero.x+32&&hero.y<=monster.y+32&&monster.y<=hero.y+32&&(++monstersCaught,reset())},render=function(){bgReady&&ctx.drawImage(bgImage,0,0),heroReady&&ctx.drawImage(heroImage,hero.x,hero.y),monsterReady&&ctx.drawImage(monsterImage,monster.x,monster.y),ctx.fillStyle="rgb(250,250,250)",ctx.font="24px Avenir Next",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Monsters caught: "+monstersCaught,32,32)},main=function(){var e=Date.now(),n=e-then;update(n/1e3),render(),then=e,requestAnimationFrame(main)},then=Date.now();reset(),main();